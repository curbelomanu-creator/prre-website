<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portal del Proyecto – PRRE Fund</title>
  <style>
    :root {
      --bg: #f3f4f6;
      --card-bg: #ffffff;
      --border: #e5e7eb;
      --text: #0f172a;
      --muted: #6b7280;
      --primary: #0f766e;
      --primary-soft: #e0f5f2;
      --accent: #10b981;
      --warning: #f59e0b;
      --radius-lg: 18px;
      --radius-md: 14px;
      --shadow: 0 16px 35px rgba(15, 23, 42, 0.12);
      --shadow-soft: 0 12px 24px rgba(15, 23, 42, 0.06);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 26px 16px 44px;
      display: flex;
      justify-content: center;
    }

    .page {
      width: 100%;
      max-width: 1200px;
    }

    /* Navegación */
    .top-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 14px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 22px;
      position: sticky;
      top: 12px;
      z-index: 10;
    }

    .brand {
      font-weight: 800;
      color: var(--primary);
      font-size: 1rem;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .nav-link {
      padding: 8px 12px;
      border-radius: 10px;
      color: var(--muted);
      font-weight: 600;
      text-decoration: none;
      border: 1px solid transparent;
      transition: 0.15s ease;
    }

    .nav-link:hover {
      color: var(--primary);
      border-color: var(--border);
      background: #f8fafc;
    }

    .nav-link.active {
      color: var(--primary);
      background: var(--primary-soft);
      border-color: #b8e9de;
    }

    /* Encabezado */
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .page-title {
      font-size: 1.9rem;
      font-weight: 800;
      margin-bottom: 6px;
    }

    .page-subtitle {
      color: var(--muted);
      font-size: 0.98rem;
      max-width: 720px;
      line-height: 1.5;
    }

    /* Layout principal */
    .two-col {
      display: grid;
      grid-template-columns: 1.4fr 1fr;
      gap: 16px;
      margin-bottom: 20px;
    }

    @media (max-width: 960px) {
      .two-col {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      padding: 18px 18px 20px;
    }

    .card + .card { margin-top: 10px; }

    .section-title {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-subtitle {
      color: var(--muted);
      font-size: 0.93rem;
      line-height: 1.45;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 700;
    }

    .pill.success { background: #ecfdf3; color: #15803d; border: 1px solid #bbf7d0; }
    .pill.warn { background: #fffbeb; color: #92400e; border: 1px solid #fcd34d; }
    .pill.muted { background: #f8fafc; color: #475569; border: 1px solid #e2e8f0; }

    /* Hero */
    .hero-card { position: relative; overflow: hidden; }
    .hero-card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(16, 185, 129, 0.12), transparent 36%),
        radial-gradient(circle at 80% 0%, rgba(14, 165, 233, 0.16), transparent 40%);
      pointer-events: none;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 14px;
    }

    @media (max-width: 860px) {
      .hero-grid {
        grid-template-columns: 1fr;
      }
    }

    .mini-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 14px;
    }

    @media (max-width: 600px) {
      .mini-grid { grid-template-columns: 1fr; }
    }

    .metric-card {
      background: rgba(15, 118, 110, 0.06);
      border: 1px solid #cceae4;
      border-radius: 14px;
      padding: 12px 14px;
    }

    .metric-label { font-size: 0.9rem; color: var(--muted); }
    .metric-value { font-size: 1.2rem; font-weight: 800; color: #0f766e; margin-top: 6px; }

    .progress {
      width: 100%;
      height: 10px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
      margin: 10px 0 6px;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #0f766e, #14b8a6);
      width: 0%;
      transition: width 0.24s ease;
    }

    /* Documentos e inversión */
    .doc-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
    }

    .doc-card {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px 12px 13px;
      background: #f8fafc;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .doc-card a {
      color: var(--primary);
      font-weight: 700;
      text-decoration: none;
      font-size: 0.95rem;
    }

    .doc-card p { color: var(--muted); font-size: 0.9rem; }

    .investment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }

    .investment-card {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px 14px;
      background: #fff;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: 0.15s ease;
    }

    .investment-card.selected {
      border-color: var(--primary);
      box-shadow: 0 16px 35px rgba(15, 118, 110, 0.2);
    }

    .investment-rate { font-size: 2rem; font-weight: 800; color: #0ea5e9; }
    .investment-min { color: var(--muted); font-size: 0.95rem; }
    .investment-title { font-weight: 800; margin: 6px 0 4px; }

    /* Pasos */
    .steps {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    .step-card {
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 14px 14px 12px;
      background: #fff;
      box-shadow: var(--shadow-soft);
      display: grid;
      grid-template-columns: 52px 1fr;
      gap: 12px;
      align-items: start;
    }

    @media (max-width: 560px) {
      .step-card { grid-template-columns: 1fr; }
      .step-number { width: 100%; max-width: 52px; }
    }

    .step-number {
      height: 52px;
      width: 52px;
      border-radius: 14px;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      color: var(--primary);
      background: #ecfdf3;
    }

    .step-header { display: flex; justify-content: space-between; gap: 10px; align-items: center; flex-wrap: wrap; }

    .badge {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 700;
      border: 1px solid transparent;
    }

    .badge.locked { background: #f8fafc; color: #94a3b8; border-color: #e2e8f0; }
    .badge.current { background: #e0f2fe; color: #075985; border-color: #bfdbfe; }
    .badge.completed { background: #ecfdf3; color: #15803d; border-color: #bbf7d0; }

    .step-actions { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }

    .btn {
      border: 1px solid var(--border);
      background: #fff;
      border-radius: 10px;
      padding: 7px 12px;
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--text);
      cursor: pointer;
      transition: 0.15s ease;
    }

    .btn.primary { background: var(--primary); border-color: var(--primary); color: #fff; }
    .btn.soft { background: #ecfdf3; border-color: #bbf7d0; color: #166534; }
    .btn.link { background: #f8fafc; color: var(--primary); border-color: #dbeafe; }

    .btn:disabled { cursor: not-allowed; opacity: 0.6; }
    .btn:hover:not(:disabled) { filter: brightness(0.97); box-shadow: var(--shadow-soft); }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 20;
    }

    .modal {
      background: #fff;
      border-radius: 16px;
      padding: 18px;
      width: min(520px, 100%);
      border: 1px solid var(--border);
      box-shadow: 0 18px 36px rgba(15, 23, 42, 0.24);
    }

    .modal-header { display: flex; justify-content: space-between; gap: 12px; align-items: flex-start; margin-bottom: 8px; }
    .modal-title { font-weight: 800; font-size: 1.05rem; }
    .modal-close { background: none; border: none; color: var(--muted); cursor: pointer; font-weight: 700; }

    .bank-row { display: flex; justify-content: space-between; gap: 10px; font-size: 0.93rem; padding: 8px 10px; border-radius: 10px; background: #f8fafc; }
    .bank-label { color: var(--muted); }

    /* Notas */
    .note {
      margin-top: 6px;
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.45;
    }
  </style>
</head>
<body>
  <div class="page">
    <nav class="top-nav">
      <a href="index.html" class="brand">PRRE Fund</a>
      <div class="nav-links">
        <a href="index.html" class="nav-link">Dashboard</a>
        <a href="nueva-inversion.html" class="nav-link">Nueva inversión</a>
        <a href="portafolio.html" class="nav-link">Portafolio</a>
        <a href="portal-del-proyecto.html" class="nav-link active">Portal del Proyecto</a>
        <a href="seguridad-transparencia.html" class="nav-link">Seguridad</a>
        <a href="kyc-aml.html" class="nav-link">KYC / AML</a>
        <a href="subscription-agreement.html" class="nav-link">Subscription Agreement</a>
      </div>
    </nav>

    <header class="page-header">
      <div>
        <h1 class="page-title">Portal del Proyecto</h1>
        <p class="page-subtitle">Sigue el avance de tu inversión en el portafolio residencial, descarga documentos clave y completa los pasos necesarios en orden.</p>
      </div>
      <div class="pill warn" id="overallStatus">En revisión</div>
    </header>

    <section class="two-col">
      <div class="card hero-card">
        <div class="hero-grid">
          <div>
            <div class="pill muted" style="margin-bottom: 8px;">Portafolio Residencial</div>
            <h2 style="font-size: 1.4rem; font-weight: 800; margin-bottom: 6px;">Valle Tania & La Canasta</h2>
            <p class="section-subtitle">Desarrollo y estabilización de comunidades residenciales en Puerto Rico con flujos de caja proyectados de largo plazo.</p>

            <div style="margin-top: 14px;">
              <div style="display: flex; justify-content: space-between; font-weight: 700; font-size: 0.95rem;">
                <span>Avance del proceso</span>
                <span id="progressLabel">0 de 5 pasos</span>
              </div>
              <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
            </div>
          </div>
          <div>
            <div class="mini-grid">
              <div class="metric-card">
                <p class="metric-label">Localización</p>
                <p class="metric-value">Puerto Rico</p>
              </div>
              <div class="metric-card">
                <p class="metric-label">Horizonte</p>
                <p class="metric-value">24 meses mínimo</p>
              </div>
              <div class="metric-card">
                <p class="metric-label">Retorno preferencial</p>
                <p class="metric-value">9% - 11%</p>
              </div>
              <div class="metric-card">
                <p class="metric-label">Frecuencia</p>
                <p class="metric-value">Interés anual</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="section-title">Documentos del proyecto</div>
        <p class="section-subtitle" style="margin-bottom: 12px;">Revisa y descarga el Private Placement Memorandum y el Operating Agreement antes de continuar.</p>
        <div class="doc-grid">
          <div class="doc-card">
            <a href="/docs/ppm-ejemplo.pdf" target="_blank">Private Placement Memorandum</a>
            <p>Detalles de la oferta y riesgos asociados.</p>
          </div>
          <div class="doc-card">
            <a href="/docs/operating-agreement-ejemplo.pdf" target="_blank">Operating Agreement</a>
            <p>Estructura de la compañía y derechos de los inversores.</p>
          </div>
          <div class="doc-card">
            <a href="https://tusitio.com/subscription-agreement" target="_blank">Subscription Agreement</a>
            <p>Completa y firma electrónicamente tu acuerdo.</p>
          </div>
          <div class="doc-card">
            <a href="https://tusitio.com/aml-verification" target="_blank">Formulario AML / KYC</a>
            <p>Proceso de debida diligencia y validación de identidad.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="section-title">Clases de inversión</div>
      <p class="section-subtitle" style="margin-bottom: 10px;">Selecciona la clase que mejor se ajuste a tu aporte. El rendimiento preferencial aumenta según el monto invertido.</p>
      <div class="investment-grid">
        <div class="investment-card" data-class="Clase D" data-rate="9%">
          <div class="investment-min">Desde USD 50,000</div>
          <div class="investment-title">Clase D</div>
          <div class="investment-rate">9%</div>
          <p class="note">Ideal para comenzar con un aporte accesible. Oferta internacional bajo Regulation S.</p>
        </div>
        <div class="investment-card" data-class="Clase C" data-rate="10%">
          <div class="investment-min">Desde USD 250,000</div>
          <div class="investment-title">Clase C</div>
          <div class="investment-rate" style="color:#0f766e;">10%</div>
          <p class="note">Para una participación más significativa dentro del Fondo. Oferta internacional bajo Regulation S.</p>
        </div>
        <div class="investment-card" data-class="Clase B" data-rate="11%">
          <div class="investment-min">Desde USD 1,000,000</div>
          <div class="investment-title">Clase B</div>
          <div class="investment-rate" style="color:#f97316;">11%</div>
          <p class="note">Capital mayor con mayor retorno preferencial. Oferta internacional bajo Regulation S.</p>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="section-title">Pasos para invertir</div>
      <p class="section-subtitle">Completa los pasos en orden. A medida que avances, se desbloquearán los siguientes.</p>

      <div class="steps">
        <div class="step-card" data-step="docs">
          <div class="step-number">1</div>
          <div>
            <div class="step-header">
              <div>
                <div class="section-title" id="ppmStepTitle" style="margin: 0; font-size: 1rem;">Revisar PPM</div>
                <p class="note">Lee los detalles de la oferta y riesgos asociados.</p>
              </div>
              <span class="badge" data-status="docs"></span>
            </div>
            <div class="step-actions">
              <a class="btn link" href="/docs/ppm-ejemplo.pdf" target="_blank">Ver PPM</a>
              <a class="btn link" href="/docs/operating-agreement-ejemplo.pdf" target="_blank">Ver Operating Agreement</a>
              <button class="btn primary" data-complete="docs">Marcar como leído</button>
            </div>
          </div>
        </div>

        <div class="step-card" data-step="subscription">
          <div class="step-number">2</div>
          <div>
            <div class="step-header">
              <div>
                <div class="section-title" id="subscriptionStepTitle" style="margin: 0; font-size: 1rem;">Firmar Subscription Agreement</div>
                <p class="note">Accede a la plataforma de firma electrónica y confirma que completaste el acuerdo.</p>
              </div>
              <span class="badge" data-status="subscription"></span>
            </div>
            <div class="step-actions">
              <a class="btn primary" data-link="subscription" href="https://tusitio.com/subscription-agreement" target="_blank">Ir a firmar</a>
              <button class="btn soft" data-complete="subscription">Ya lo firmé</button>
            </div>
          </div>
        </div>

        <div class="step-card" data-step="aml">
          <div class="step-number">3</div>
          <div>
            <div class="step-header">
              <div>
                <div class="section-title" style="margin: 0; font-size: 1rem;">Completar verificación AML / KYC</div>
                <p class="note">Sube tu identificación y documentos requeridos en el formulario de debida diligencia.</p>
              </div>
              <span class="badge" data-status="aml"></span>
            </div>
            <div class="step-actions">
              <a class="btn primary" data-link="aml" href="https://tusitio.com/aml-verification" target="_blank">Ir al formulario</a>
              <button class="btn soft" data-complete="aml">Ya completé AML</button>
            </div>
          </div>
        </div>

        <div class="step-card" data-step="review">
          <div class="step-number">4</div>
          <div>
            <div class="step-header">
              <div>
                <div class="section-title" style="margin: 0; font-size: 1rem;">Revisión y aprobación del Fondo</div>
                <p class="note">Nuestro equipo validará tu acuerdo y la verificación AML. Recibirás el agreement contrafirmado al aprobarse.</p>
              </div>
              <span class="badge" data-status="review"></span>
            </div>
            <p class="note" style="margin-top: 8px;">Puedes simular la aprobación para ver cómo se habilita el siguiente paso.</p>
            <div class="step-actions">
              <button class="btn link" id="simulateApproval">Simular aprobación</button>
            </div>
          </div>
        </div>

        <div class="step-card" data-step="wire">
          <div class="step-number">5</div>
          <div>
            <div class="step-header">
              <div>
                <div class="section-title" style="margin: 0; font-size: 1rem;">Transferencia bancaria y comprobante</div>
                <p class="note">Realiza la transferencia al Fondo y sube el comprobante para aplicar tu aporte al proyecto.</p>
              </div>
              <span class="badge" data-status="wire"></span>
            </div>
            <div class="step-actions">
              <button class="btn link" id="openBankModal">Ver datos bancarios</button>
              <label class="btn soft" style="cursor: pointer;">
                Cargar comprobante
                <input type="file" id="wireProof" style="display: none;" />
              </label>
              <span class="note" id="proofLabel" style="display:none;">Comprobante cargado.</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Modal de banco -->
  <div class="modal-backdrop" id="bankModal">
    <div class="modal">
      <div class="modal-header">
        <div>
          <div class="modal-title">Datos bancarios para la transferencia</div>
          <p class="note">Usa esta referencia al enviar tu aporte para una conciliación más rápida.</p>
        </div>
        <button class="modal-close" id="closeBankModal">✕</button>
      </div>
      <div class="bank-row"><span class="bank-label">Banco</span><span>Banco de Ejemplo</span></div>
      <div class="bank-row"><span class="bank-label">Beneficiario</span><span>Puerto Rico Real Estate Fund LLC</span></div>
      <div class="bank-row"><span class="bank-label">Cuenta</span><span>000123456789</span></div>
      <div class="bank-row"><span class="bank-label">Routing / ABA</span><span>021000021</span></div>
      <div class="bank-row"><span class="bank-label">SWIFT</span><span>BOFAUS3N</span></div>
      <div class="bank-row" style="align-items: flex-start;">
        <span class="bank-label">Referencia</span>
        <span>Nombre del inversor + Proyecto Valle Tania</span>
      </div>
      <p class="note" style="margin-top: 10px;">Recuerda subir el comprobante en el paso 5 para asignar tu inversión.</p>
    </div>
  </div>

  <script>
    const investmentCards = Array.from(document.querySelectorAll('.investment-card'));
    const ppmStepTitle = document.getElementById('ppmStepTitle');
    const subscriptionStepTitle = document.getElementById('subscriptionStepTitle');
    let selectedClass = investmentCards[0]?.dataset.class || 'Clase D';

    function setSelectedClass(className) {
      selectedClass = className;
      investmentCards.forEach((card) => {
        const isSelected = card.dataset.class === className;
        card.classList.toggle('selected', isSelected);
      });
      ppmStepTitle.textContent = `Revisar PPM - ${className}`;
      subscriptionStepTitle.textContent = `Firmar Subscription Agreement - ${className}`;
    }

    investmentCards.forEach((card) => {
      card.addEventListener('click', () => setSelectedClass(card.dataset.class));
    });

    const steps = {
      docs: 'current',
      subscription: 'locked',
      aml: 'locked',
      review: 'locked',
      wire: 'locked',
    };

    let isApproved = false;

    const badgeLabels = {
      locked: 'Bloqueado',
      current: 'En curso',
      completed: 'Completado',
    };

    function updateProgress() {
      const total = 5;
      const completed = Object.values(steps).filter((s) => s === 'completed').length;
      const percent = (completed / total) * 100;
      document.getElementById('progressBar').style.width = `${percent}%`;
      document.getElementById('progressLabel').textContent = `${completed} de ${total} pasos`;
      const overall = document.getElementById('overallStatus');
      if (isApproved) {
        overall.textContent = 'Aprobado';
        overall.className = 'pill success';
      } else {
        overall.textContent = steps.review === 'completed' ? 'Pendiente de transferencia' : 'En revisión';
        overall.className = 'pill warn';
      }
    }

    function refreshStatuses() {
      updateProgress();
      Object.entries(steps).forEach(([key, status]) => {
        const badge = document.querySelector(`[data-status="${key}"]`);
        if (!badge) return;
        badge.textContent = badgeLabels[status];
        badge.className = `badge ${status}`;
        const stepCard = document.querySelector(`[data-step="${key}"]`);
        const buttons = stepCard ? stepCard.querySelectorAll('button, a, input[type="file"]') : [];
        buttons.forEach((btn) => {
          if (btn.dataset.link || btn.tagName === 'A') {
            btn.classList.toggle('disabled', status === 'locked');
            btn.style.pointerEvents = status === 'locked' ? 'none' : 'auto';
            btn.style.opacity = status === 'locked' ? '0.6' : '1';
          }
          if (btn.dataset.complete || btn.type === 'file' || btn.id === 'wireProof') {
            btn.disabled = status === 'locked';
          }
        });
      });
    }

    function setStepCompleted(stepKey) {
      if (steps[stepKey] === 'locked') return;
      steps[stepKey] = 'completed';
      if (stepKey === 'docs' && steps.subscription === 'locked') steps.subscription = 'current';
      if (stepKey === 'subscription' && steps.aml === 'locked') steps.aml = 'current';
      if (stepKey === 'aml') {
        if (steps.review === 'locked') steps.review = 'current';
      }
      if (stepKey === 'wire') {
        // final step, nothing extra
      }
      refreshStatuses();
    }

    document.querySelectorAll('[data-complete]').forEach((btn) => {
      btn.addEventListener('click', () => setStepCompleted(btn.dataset.complete));
    });

    document.getElementById('simulateApproval').addEventListener('click', () => {
      isApproved = true;
      steps.review = 'completed';
      if (steps.wire === 'locked') steps.wire = 'current';
      refreshStatuses();
    });

    const modal = document.getElementById('bankModal');
    document.getElementById('openBankModal').addEventListener('click', () => {
      if (steps.wire === 'locked') return;
      modal.style.display = 'flex';
    });
    document.getElementById('closeBankModal').addEventListener('click', () => {
      modal.style.display = 'none';
    });
    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.style.display = 'none';
    });

    const proofInput = document.getElementById('wireProof');
    const proofLabel = document.getElementById('proofLabel');
    proofInput.addEventListener('change', (e) => {
      const file = e.target.files && e.target.files[0];
      if (file) {
        proofLabel.style.display = 'inline';
        proofLabel.textContent = `Comprobante cargado: ${file.name}`;
        setStepCompleted('wire');
      }
    });

    refreshStatuses();

    setSelectedClass(selectedClass);
  </script>
</body>
</html>
